<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400">
  <title>ANEF Status Tracker</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">

    <!-- BanniÃ¨re mise Ã  jour -->
    <div id="update-banner" class="update-banner hidden">
      <div class="update-content">
        <span class="update-icon">ğŸ†•</span>
        <span class="update-text">Version <span id="update-version"></span> disponible</span>
      </div>
      <a id="update-link" href="#" target="_blank" class="update-btn">TÃ©lÃ©charger</a>
      <button id="update-dismiss" class="update-close" title="Fermer">&times;</button>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1>ANEF Status <span id="version" class="version">v1.0</span></h1>
      </div>
      <div class="header-actions">
        <button id="btn-settings" class="btn-icon" title="ParamÃ¨tres">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Vue: Maintenance -->
    <div id="view-maintenance" class="view hidden">
      <div class="card card-maintenance">
        <div class="card-icon-wrapper maintenance">
          <span class="card-icon">ğŸ”§</span>
        </div>
        <h2>Site en maintenance</h2>
        <p>Le site ANEF est actuellement en maintenance. Veuillez rÃ©essayer plus tard.</p>
        <button id="btn-retry" class="btn btn-primary">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          <span>RÃ©essayer</span>
        </button>
      </div>
    </div>

    <!-- Vue: Session expirÃ©e -->
    <div id="view-not-connected" class="view hidden">
      <div class="card card-warning">
        <div class="card-icon-wrapper warning">
          <span class="card-icon">ğŸ”’</span>
        </div>
        <h2>Session expirÃ©e</h2>
        <p>Votre session ANEF a expirÃ©. Reconnectez-vous pour actualiser votre statut.</p>
        <p class="hint-text">
          <a href="#" id="link-save-credentials" class="link-settings">Enregistrez vos identifiants</a> pour une connexion automatique.
        </p>
        <button id="btn-login" class="btn btn-primary">
          <span>Se connecter Ã  ANEF</span>
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Vue: Aucune donnÃ©e -->
    <div id="view-no-data" class="view hidden">
      <div class="card card-info">
        <div class="card-icon-wrapper info">
          <span class="card-icon">ğŸ“Š</span>
        </div>
        <h2>Aucune donnÃ©e</h2>
        <p>Visitez votre espace ANEF pour rÃ©cupÃ©rer votre statut.</p>
        <button id="btn-check" class="btn btn-primary">
          <span>VÃ©rifier mon statut</span>
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Vue: Chargement -->
    <div id="view-loading" class="view hidden">
      <div class="card card-loading">
        <div class="spinner"></div>
        <h2 id="loading-title">Actualisation...</h2>
        <p id="loading-message">Ouverture de la page ANEF...</p>
        <div class="loading-steps">
          <div class="loading-step" id="step-open">
            <span class="step-icon">1</span>
            <span class="step-text">Ouverture page</span>
          </div>
          <div class="loading-step" id="step-load">
            <span class="step-icon">2</span>
            <span class="step-text">Chargement</span>
          </div>
          <div class="loading-step" id="step-data">
            <span class="step-icon">3</span>
            <span class="step-text">RÃ©cupÃ©ration</span>
          </div>
        </div>
        <p class="loading-hint">Cette opÃ©ration peut prendre jusqu'Ã  45 secondes</p>

        <!-- Citations sur la patience -->
        <div class="quote-container">
          <div class="quote-wrapper">
            <p class="quote-text" id="quote-text"></p>
            <p class="quote-author" id="quote-author"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Vue: Statut -->
    <div id="view-status" class="view hidden">

      <!-- Carte principale -->
      <div class="status-card">
        <!-- Header statut -->
        <div class="status-header">
          <div class="status-icon-wrapper">
            <span class="status-icon" id="status-icon">ğŸ“‹</span>
          </div>
          <div class="status-info">
            <span class="status-phase" id="status-phase">â€”</span>
            <span class="status-step" id="status-step">Ã‰tape ?/12</span>
          </div>
        </div>

        <!-- Code statut -->
        <div class="status-code-wrapper">
          <span class="status-code" id="status-code">â€”</span>
          <button id="btn-copy-status" class="btn-copy" title="Copier le code">
            <svg class="icon-copy" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <svg class="icon-check" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </button>
        </div>

        <!-- Description -->
        <p class="status-description" id="status-description">â€”</p>

        <!-- Barre de progression -->
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="progress-labels">
            <span>DÃ©pÃ´t</span>
            <span>DÃ©cret</span>
          </div>
        </div>

        <!-- Date -->
        <div class="status-date">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <span id="status-date">â€”</span>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="actions">
        <button id="btn-refresh" class="btn btn-primary">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          <span>Actualiser</span>
        </button>
        <button id="btn-download" class="btn btn-secondary" title="Exporter le suivi en image">
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
          </svg>
          <span>Partager</span>
        </button>
      </div>

      <!-- Stats -->
      <div id="stats-section" class="stats-section">
        <div class="stats-cards">
          <div id="stat-depot" class="stat-card">
            <span class="stat-icon">ğŸ“…</span>
            <span class="stat-label">DÃ©pÃ´t</span>
            <span class="stat-value" id="stat-depot-value">â€”</span>
            <span class="stat-date" id="stat-depot-date">â€”</span>
          </div>
          <div id="stat-entretien" class="stat-card">
            <span class="stat-icon">ğŸ—£ï¸</span>
            <span class="stat-label">Entretien</span>
            <span class="stat-value" id="stat-entretien-value">â€”</span>
            <span class="stat-date" id="stat-entretien-date">â€”</span>
          </div>
          <div id="stat-statut-age" class="stat-card">
            <span class="stat-icon">â±ï¸</span>
            <span class="stat-label">DerniÃ¨re MAJ</span>
            <span class="stat-value" id="stat-statut-age-value">â€”</span>
            <span class="stat-date" id="stat-statut-age-date">â€”</span>
          </div>
        </div>
      </div>

      <!-- DÃ©tails -->
      <div id="details-section" class="details-section hidden">
        <div class="details-grid">
          <div id="detail-dossier-id" class="detail-chip hidden">
            <span class="detail-chip-label">Dossier</span>
            <span class="detail-chip-value" id="detail-dossier-id-value">â€”</span>
          </div>
          <div id="detail-numero-national" class="detail-chip hidden">
            <span class="detail-chip-label">NÂ° National</span>
            <span class="detail-chip-value" id="detail-numero-national-value">â€”</span>
          </div>
          <div id="detail-prefecture" class="detail-chip hidden">
            <span class="detail-chip-label">PrÃ©fecture</span>
            <span class="detail-chip-value" id="detail-prefecture-value">â€”</span>
          </div>
          <div id="detail-type-demande" class="detail-chip hidden">
            <span class="detail-chip-label">Type</span>
            <span class="detail-chip-value" id="detail-type-demande-value">â€”</span>
          </div>
          <div id="detail-depot" class="detail-chip detail-chip-wide hidden">
            <span class="detail-chip-label">ğŸ“… DÃ©pÃ´t</span>
            <span class="detail-chip-value" id="detail-depot-value">â€”</span>
          </div>
          <div id="detail-entretien" class="detail-chip detail-chip-wide hidden">
            <span class="detail-chip-label">ğŸ—£ï¸ Entretien</span>
            <span class="detail-chip-value" id="detail-entretien-value">â€”</span>
          </div>
          <div id="detail-entretien-lieu" class="detail-chip hidden">
            <span class="detail-chip-label">Lieu</span>
            <span class="detail-chip-value" id="detail-entretien-lieu-value">â€”</span>
          </div>
          <div id="detail-decret" class="detail-chip detail-chip-success detail-chip-wide hidden">
            <span class="detail-chip-label">ğŸ‰ DÃ©cret</span>
            <span class="detail-chip-value" id="detail-decret-value">â€”</span>
          </div>
        </div>
      </div>

      <!-- DerniÃ¨re vÃ©rification -->
      <div class="last-check">
        DerniÃ¨re vÃ©rification : <span id="last-check-date">â€”</span>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      ANEF Status Tracker
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
